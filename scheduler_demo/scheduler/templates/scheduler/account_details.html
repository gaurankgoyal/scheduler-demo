{% extends "scheduler/base.html" %}
{% block content %}
    <article class="media content-section">
            <div class="article-metadata">
              {% for account in aws_account %}
               <h4 class="font-weight-bold text-primary text-center">AWS-Account {{ account.name }}/{{ account.account_number }}</h4>
              {% endfor %}
            </div>

    <table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Instance Id</th>
      <th scope="col">Instance Ip</th>
      <th scope="col">Service</th>
      <th scope="col">State</th>
      <th scope="col">Cron</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
  {% for ec2 in ec2_details %}
    <tr>
      <th scope="row">{{ forloop.counter }}</th>
      <td>{{ ec2.instance_id }}</td>
      <td>{{ ec2.instance_ip }}</td>
      <td>EC2</td>
      <td>{{ ec2.instance_state }}</td>
      {% for account in aws_account %}
      <td>{{ account.account_number }}</td>
      {% endfor %}
      <td>
        {% if ec2.instance_state == 'running' or ec2.instance_state == 'pending'   %}
        {% for account in aws_account %}
      <a type="button" class="btn btn-danger" href="/aws_account/{{ account.account_number }}/{{ ec2.instance_id }}/stop">Stop</a>
      {% endfor %}
        {% else%}
        {% for account in aws_account %}
      <a type="button" class="btn btn-success" href="/aws_account/{{ account.account_number }}/{{ ec2.instance_id }}/start">Start</a>
      {% endfor %}
        {% endif %}
      <button type="button" class="btn btn-primary">Schedule</button></td>
    </tr>
  {% endfor %}
  </tbody>
</table>
</article>
{% endblock content %}